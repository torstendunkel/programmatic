/* AST v0.6.0 Updated : 2017-03-07 */
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(6),n(14),n(11),n(8),n(5),n(18),n(13),n(9),n(10),n(20),n(7),n(16),n(17),n(15),n(19),n(12),n(2),e.exports=n(3)},function(e,t,n){function r(e){if(e.nobid)return this.nobid=!0,this.tagId=e.tag_id,this.auctionId=e.auction_id,this;e.ads&&e.ads.length>1;var t=e.ads[0];this.adType=t.ad_type,this.buyerMemberId=t.buyer_member_id,this.tagId=e.tag_id,this.auctionId=e.auction_id,this.source=t.content_source,this.cpm=t.cpm,this.creativeId=t.creative_id;var n,r,o=a(i(e.uuid));if(s.isArray(o)&&o[0]&&(n=o[0].height,r=o[0].width),t.rtb&&t.rtb.banner)this.banner={width:t.rtb.banner.width,height:t.rtb.banner.height,content:t.rtb.banner.content,trackers:t.rtb.trackers},n=t.rtb.banner.height,r=t.rtb.banner.width;else if(t.rtb&&t.rtb.video){var u=t.rtb.video;this.video={duration:u.duration_ms,playbackMethods:u.playback_methods,frameworks:u.frameworks,content:u.content,trackers:t.rtb.trackers}}else if(t.rtb&&t.rtb[d.MEDIA_TYPE.NATIVE]){var l=t.rtb[d.MEDIA_TYPE.NATIVE][d.MEDIA_TYPE.NATIVE][0];this[d.MEDIA_TYPE.NATIVE]={type:l.type,title:l.title,description:l.description,fullText:l.full_text,iconImgUrl:l.icon_img_url,mainMedia:l.main_media,cta:l.cta,sponsoredBy:l.sponsored_by,impressionTrackers:l.impression_trackers,clickTrackers:l.click_trackers,rating:l.rating,clickUrl:l.click_url,clickFallbackUrl:l.click_fallback_url,custom:l.custom}}this.height=n,this.width=r}function a(e){var t=[];return s.isEmpty(e.sizes)||(t=o.getSizes(e.sizes)),t}function i(e){var t={};return s._each(apntag.requests.tags,function(n){e===n.uuid&&(t=n)}),t}var o=n(2),s=n(3),d=n(4),u={},l=function(e){return new r(e)};t.getAdObj=function(e){if(!e||!e.uuid)return{};if(u[e.uuid])return u[e.uuid];try{var t=l(e);return u[e.uuid]=t,t}catch(n){s.logError("adManager.getAdObj: Error trying to instantiate new adObj: "+n.message)}},t.getAdErrorObj=function(e,t,n,r){return{code:r,errMessage:e||n.message,exception:n,targetId:t}}},function(e,t,n){function r(e,t,n){var r={};return apntag.debug&&!i.isEmpty(t)&&(r.enabled=!0,e?r.member_id=Number(e):"",t?r.dongle=String(t):"",n?r.bidder_id=Number(n):"",r.debug_timeout=1e3),apntag.test&&(r.test=apntag.test),r}function a(e){var t=[];return i._each(e,function(e,n){if(i.isArray(e)){var r=[];i._each(e,function(e){e=i.getValueString("keywords."+n,e),e&&r.push(e)}),e=r}else{if(e=i.getValueString("keywords."+n,e),!i.isStr(e))return;e=[e]}var a={key:n,value:e};t.push(a)}),t}var i=n(3),o=n(4),s=n(5),d=o.TYPE.STRING,u=o.TYPE.NUM,l=o.TYPE.BOOL,g=t,c=o.DEBUG.AST_DONGLE,f=o.DEBUG.AST_TOOLKIT,p=o.DEBUG.AST_TEST,m=o.DEBUG.AST_DEBUG_MEMBER,h=o.DEBUG.AST_DEBUG_BIDDER,v=function(e){var t={},n=e.site;return i.isEmpty(n)||i.isEmpty(n.id)||(t.id=n.id),t},E=function(e){var t={},n=e.app;return i.isEmpty(n)||i.isEmpty(n.appid)||(t.appid=n.appid),t},y=function(e){var t={},n=e.device;if(!i.isEmpty(n)){i.isEmpty(n.useragent)||(t.useragent=n.useragent),i.isEmpty(n.geo)||(t.geo=n.geo),i.isEmpty(n.ip)||(t.ip=n.ip),i.isEmpty(n.deviceType)||(t.devicetype=n.deviceType),i.isEmpty(n.make)||(t.make=n.make),i.isEmpty(n.model)||(t.model=n.model),i.isEmpty(n.os)||(t.os=n.os),i.isEmpty(n.osVersion)||(t.os_version=n.osVersion),i.isEmpty(n.carrier)||(t.carrier=n.carrier);var r=i.getValueAsType("device.connectionType",n.connectionType,u);t.connectiontype=r,i.isEmpty(n.mcc)||(t.mcc=n.mcc),i.isEmpty(n.mnc)||(t.mnc=n.mnc),i.isEmpty(n.lmt)||(t.lmt=n.lmt),i.isEmpty(n.deviceId)||(t.device_id=n.deviceId);var a=i.getValueAsType("device.devTime",n.devTime,u);t.devtime=a}return t};g.createPageUser=function(e){var t={};if(!i.isEmpty(e)){e.externalUid&&i.isStr(e.externalUid)&&(t.external_uid=e.externalUid),i.isEmpty(e.segments)||(t.segments=e.segments);var n=i.getValueAsType("user.age",e.age,u);t.age=n;var r=i.getValueAsType("user.gender",e.gender,u);t.gender=r;var a=i.getValueAsType("user.language",e.language,d);t.language=a;var o=i.getValueAsType("user.dnt",e.dnt,l);t.dnt=o}return t},g.createTag=function(e){var t={};if(e.uuid=i.getUUID(),!i.isEmpty(e.sizes)){var n=this.getSizes(e.sizes);i.isEmpty(n)||(t.sizes=n,t.primary_size=n[0])}if(!i.isEmpty(e.privateSizes)){var r=this.getSizes(e.privateSizes);i.isEmpty(r)||(t.private_sizes=r)}if(e.supplyType&&i.isStr(e.supplyType)&&(t.supply_type=e.supplyType),e.pubClick&&i.isStr(e.pubClick)&&(t.pubclick=e.pubClick),e.pubClickEnc&&i.isStr(e.pubClickEnc)&&(t.pubclickenc=e.pubClickEnc),e.reserve&&(i.isNumber(e.reserve)||i.isArray(e.reserve))&&(t.reserve=e.reserve),e.extInvCode&&i.isStr(e.extInvCode)&&(t.ext_inv_code=e.extInvCode),t.uuid=e.uuid,e.tagId&&(t.id=e.tagId),e.formats&&(t.formats=e.formats),e.position&&("above"===e.position?t.position=1:"below"===e.position?t.position=2:t.position=0),e.invCode&&(t.code=e.invCode),e.prebid&&(t.prebid=e.prebid),e.externalImpId&&(t.external_imp_id=e.externalImpId),e.allowSmallerSizes===!0?t.allow_smaller_sizes=!0:t.allow_smaller_sizes=!1,e.disablePsa===!0&&(t.disable_psa=!0),e.allowedFormats&&(t.ad_types=e.allowedFormats),!i.isEmpty(e.video)){var o=e.video,s={};o.id&&(s.id=o.id),i.isEmpty(o.mimes)||(s.mimes=o.mimes),o.maxDuration&&(s.maxduration=o.maxDuration),o.minDuration&&(s.minduration=o.minDuration),o.startDelay&&(s.startdelay=o.startDelay),o.skippable&&(s.skippable=o.skippable),i.isEmpty(o.playbackMethod)||(s.playback_method=o.playbackMethod),i.isEmpty(o.frameworks)||(s.frameworks=o.frameworks),t.video=s}if(!i.isEmpty(e.keywords)){var d=a(e.keywords);t.keywords=d}if(e.forceCreativeId){var u=Number(e.forceCreativeId);isNaN(u)?i.logError("Force Creative must be a number"):(t.force_creative_id=u,i.logMessage("Force Creative in use for targetId: "+e.targetId))}return e.nobidIfUnsold&&(t.nobid_if_unsold=!0),e.trafficSourceCode&&(t.traffic_source_code=e.trafficSourceCode.toString()),t},g.getSizes=function(e){var t=[],n={};if(i.isArray(e)&&2===e.length&&!i.isArray(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e)for(var r=0;r<e.length;r++){var a=e[r];n={},n.width=parseInt(a[0],10),n.height=parseInt(a[1],10),t.push(n)}return t},g.buildRequestJsonByMemberId=function(e,t,n){var o={};e.disablePsa&&i._each(e.tags,function(e){e.disablePsa=!0});var d=[],u=0;i._each(e.tags,function(e){if(!e.utCalled&&e.member===t){var n=g.createTag(e);e.utCalled=!0,e.tagNumber=u,u++,d.push(n)}}),s.build(e.tags,d,n),o.tags=d,o.uuid=i.getUUID(),o.member_id=t;var l=null;i.isEmpty(e.keywords)?i.isEmpty(e.targetingParams)||(l=a(e.targetingParams),o.keywords=l):(l=a(e.keywords),o.keywords=l),i.isEmpty(e.user)||(o.user=this.createPageUser(e.user)),i.isEmpty(e.device)||(o.device=y(e)),i.isEmpty(e.app)||(o.app=E(e)),i.isEmpty(e.site)||(o.site=v(e)),o.tags=d;var b=i.getParameterByName(c);b&&""!==b&&(apntag.dongle=b);var I=i.getParameterByName(f);(I&&""!==I||!i.isEmpty(e.toolkit))&&(o.toolkit={enabled:!0,dongle:b||e.toolkit.dongle});var w=i.getParameterByName(m);w&&""!==w&&(apntag.debug_member=w);var T=i.getParameterByName(h);T&&""!==T&&(apntag.debug_bidder=T);var A="TRUE"===i.getParameterByName(p).toUpperCase();if(A&&""!==A&&(apntag.test=A),apntag.test||apntag.debug&&!i.isEmpty(apntag.dongle)){var _="";apntag.debug_member&&(_=apntag.debug_member);var O=r(_,apntag.dongle,apntag.debug_bidder);o.debug=O}return o}},function(e,t,n){function r(){return!(typeof $sf===f||!$sf.ext.debug)}var a=n(4),i=a.TYPE.ARRAY,o=a.TYPE.STRING,s=a.TYPE.FUNC,d=a.TYPE.NUM,u=a.TYPE.OBJ,l=Object.prototype.hasOwnProperty,g=!1,c=a.DEBUG.DEBUG_MODE,f=a.OBJECT_TYPE.UNDEFINED,p=a.CONTENT_SOURCE.RTB,m=a.CONTENT_SOURCE.CSM,h=a.CONTENT_SOURCE.SSM,v=null;try{v="object"==typeof console.info?console.info:console.info.bind(window.console)}catch(E){}t.addEventHandler=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},t.isA=function(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"},t.isObj=function(e){return this.isA(e,u)},t.isFn=function(e){return this.isA(e,s)},t.isStr=function(e){return this.isA(e,o)},t.isArray=function(e){return this.isA(e,i)},t.isNumber=function(e){return this.isA(e,d)},t.isEmpty=function(e){if(!e)return!0;if(this.isArray(e)||this.isStr(e))return!(e.length>0);for(var t in e)if(l.call(e,t))return!1;return!0},t.logMessage=function(e){var t=b();if(this.debugTurnedOn()&&y()){var n=r()?"SAFEFRAME MESSAGE: ":"MESSAGE: ";console.log(t+n+e)}},t.logWarn=function(e){var t=b();if(this.debugTurnedOn()&&y()){var n=r()?"SAFEFRAME WARN: ":"WARN: ";console.warn?console.warn(t+n+e):console.log(t+n+e)}},t.logError=function(e,t){var n=t||"GENERAL_ERROR",a=b();if(this.debugTurnedOn()&&y()){var i=r()?"SAFEFRAME ":"";console.error?console.error(a+i+n+": "+e):console.log(a+i+n+": "+e)}},t.logTimestamp=function(e){this.debugTurnedOn()&&y()&&console.timeStamp&&console.timeStamp(e)},t.logInfo=function(e,t){if(this.debugTurnedOn()&&y()){var n=b();if(v){t&&0!==t.length||(t="");var a=r()?"SAFEFRAME INFO: ":"INFO: ";v(n+a+e+(""===t?"":" : params : "),t)}}},t.loadScript=function(e,t,n){var r=e.document,a=r.createElement("script");a.type="text/javascript",a.async=!0,n&&"function"==typeof n&&(a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()}),a.src=t;var i=r.getElementsByTagName("head");return i=i.length?i:r.getElementsByTagName("body"),i.length&&(i=i[0],i.insertBefore(a,i.firstChild)),a},t.getUUID=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)});return t},t.loadPixelUrl=function(e,t,n){var r,a=e.document.getElementsByTagName("head");if(e&&a&&t){r=new Image,r.id=n,r.src=t,r.height=0,r.width=0,r.style.display="none",r.onload=function(){try{this.parentNode.removeChild(this)}catch(e){}};try{a=a.length?a:e.document.getElementsByTagName("body"),a.length&&(a=a[0],a.insertBefore(r,a.firstChild))}catch(i){this.logError("Error logging impression for tag: "+n+" :"+i.message)}}},t._each=function(e,t){if(!this.isEmpty(e)){if(this.isFn(e.forEach))return e.forEach(t);var n=0,r=e.length;if(r>0)for(;n<r;n++)t(e[n],n,e);else for(n in e)l.call(e,n)&&t(e[n],n,e)}},t.contains=function(e,t){if(this.isEmpty(e))return!1;for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};var y=function(){return window.console&&window.console.log};t.debugTurnedOn=function(){return!!r()||(this.getWindow().apntag=this.getWindow().apntag||{},apntag&&apntag.debug===!1&&g===!1&&(apntag.debug="TRUE"===this.getParameterByName(c).toUpperCase(),g=!0),!(!apntag||!apntag.debug))},t.stringContains=function(e,t){return!!e&&e.indexOf(t)!==-1},t.getSearchQuery=function(){try{return window.top.location.search}catch(e){try{return window.location.search}catch(e){return""}}},t.getParameterByName=function(e,t){var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),a=r.exec(t||this.getSearchQuery());return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},t.hasOwn=function(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):typeof e[t]!==f&&e.constructor.prototype[t]!==e[t]};var b=function(){var e=new Date,t="["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] ";return t};t.getTargetArrayforRefresh=function(e){var t=[];return this.isArray(e)?t=e:this.isStr(e)&&t.push(e),t},t._map=function(e,t){if(this.isEmpty(e))return[];if(this.isFn(e.map))return e.map(t);var n=[];return this._each(e,function(r,a){n.push(t(r,a,e))}),n},t.getValueString=function(e,t,n){return void 0===t||null===t?n:this.isStr(t)?t:this.isNumber(t)?t.toString():void this.logWarn("Unsuported type for param: "+e+" required type: String")},t.getValueAsType=function(e,t,n,r){return void 0===t||null===t?r:this.isA(t,n)?t:(this.logWarn("Unsuported type for param: "+e+" required type: "+n),n===d&&(t=Number(t)),isNaN(t)?r:t)},t.getWindow=function(){return window},t.getAdObjFromAdsArray=function(e){if(e&&e.length>0){if(e[0][p])return e[0][p];if(e[0][m])return e[0][m];if(e[0][h])return e[0][h]}},t.cloneAsObject=function(e){if(null===e||!(e instanceof Object))return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=this.cloneAsObject(e[n]);return t},t.getCdnOrigin=function(){return this.getWindow().document.location.protocol+"//"+a.EXTERNAL_LIB.CDN_ORIGIN}},function(e,t){e.exports={PREFIX:{UT_IFRAME:"utif_",UT_DIV:"div_utif_"},LOG:{WARN:"WARN"},DEBUG:{DEBUG_MODE:"ast_debug",AST_DONGLE:"ast_dongle",AST_DEBUG_MEMBER:"ast_debug_member",AST_DEBUG_BIDDER:"ast_debug_bidder",AST_TEST:"ast_test",AST_TOOLKIT:"ast_toolkit",AST_OVERRIDE:{BASE:"ast_override_",DIV:"div",INDEX:"index",TAG_ID:"tag_id",INV_CODE:"inv_code"}},OBJECT_TYPE:{UNDEFINED:"undefined",OBJECT:"object",STRING:"string",NUMBER:"number"},BROWSER_TYPE:{IE:"msie",OPERA:"opera"},RENDERER_EVENTS:{LOADED:"loaded",IMPRESSION:"impression"},ENDPOINT:{UT_BASE:"/ut/v2",IMPBUS:"ib.adnxs.com",UT_PREBID:"/ut/v2/prebid"},UT_RESPONSE_PROP:{MEDIA_TYPE:"media_type",CREATIVE_ID:"creative_id",AD_TYPE:"ad_type",BANNER:"banner",VIDEO:"video",CONTENT:"content",UUID:"uuid"},MEDIA_TYPE:{BANNER:"banner",NATIVE:"native",VIDEO:"video"},AD:{CREATIVE_ID:"creative_id",NOTIFY:"notify_url",NOAD:"no_ad_url",IMP_URLS:"impression_urls",TRACKERS:"trackers"},CONTENT_SOURCE:{RTB:"rtb",CSM:"csm",SSM:"ssm"},AD_TYPE:{BANNER:"banner",NATIVE:"native",VIDEO:"video"},EXTERNAL_LIB:{VIDEO_MEDIATION_JS:"https://acdn.adnxs.com/video/astMediation/AstMediationManager.js",BANNER_MEDIATION_JS:"https://acdn.adnxs.com/mediation/v2/mediation.js",SAFE_FRAME_URL:"//acdn.adnxs.com/ast/safeframe/1-0-0/html/safeframe-v2.html",CDN_ORIGIN:"acdn.adnxs.com"},EVENTS:{REQUEST:"adRequested",AVAILABLE:"adAvailable",LOADED:"adLoaded",REQUEST_FAIL:"adRequestFailure",NO_BID:"adNoBid",DEFAULT:"adDefault",ERROR:"adError",COLLAPSE:"adCollapse",BAD_REQUEST:"adBadRequest"},TYPE:{ARRAY:"Array",STRING:"String",FUNC:"Function",NUM:"Number",OBJ:"Object",BOOL:"Boolean"},SAFEFRAME:{DEFAULT_ZINDEX:3e3,STATUS:{READY:"ready",NOTIFY_EXPANDED:"expanded",NOTIFY_COLLAPSED:"collapsed",NOTIFY_ERROR:"error",FOCUS_CHANGE:"focus-change"}}}},function(e,t,n){function r(e){return o.getParameterByName(e,d.queryString)}function a(e,t){var n=null;return o._each(t,function(t){t.uuid===e.uuid&&(n=t.targetId)}),n}function i(e,t,n){var r=Number(t);if(isNaN(r))o.logError("Force Creative must be a number");else{e[E]=r,apntag.test=!0;var i=a(e,n);o.logMessage("Force Creative in use for targetId: "+i)}}var o=n(3),s=n(4),d=t,u=[],l=s.DEBUG.AST_OVERRIDE,g=l.BASE,c=g+l.DIV,f=g+l.INDEX,p=g+l.TAG_ID,m=g+l.INV_CODE,h=",",v=":",E="force_creative_id";d.queryString=void 0,d.build=function(e,t,n){if(o.stringContains(d.queryString||o.getSearchQuery(),g)){if(!o.isEmpty(r(f))){u=r(f).split(h);for(var a=0;a<u.length;a++){var s=u[a].split(v),l=Number(s[0]);if(isNaN(l)||void 0===t[l])o.logError("Invalid ast_override value for index : "+l);else{for(var E=null,y=null,b=0;b<n.length;b++)b===l&&(y=n[b].uuid);for(var I=0;I<t.length;I++)t[I].uuid===y&&i(t[I],s[1],e)}}}if(!o.isEmpty(r(c))){u=r(c).split(h);for(var a=0;a<u.length;a++){var s=u[a].split(v),w=null;if(o._each(e,function(e,t){t===s[0]&&(w=e.uuid)}),w)for(var T=0;T<t.length;T++)t[T].uuid===w&&i(t[T],s[1],e);else o.logError("Invalid ast_override value for target div id : "+s[0])}}if(!o.isEmpty(r(p))){u=r(p).split(h);for(var a=0;a<u.length;a++){for(var s=u[a].split(v),A=!1,T=0;T<t.length;T++){var E=t[T];E.id===Number(s[0])&&(i(E,s[1],e),A=!0)}A||o.logError("Invalid ast_override value for tag id : "+s[0])}}if(!o.isEmpty(r(m))){u=r(m).split(h);for(var a=0;a<u.length;a++){for(var s=u[a].split(v),_=!1,T=0;T<t.length;T++){var E=t[T];E.code===s[0]&&(i(E,s[1],e),_=!0)}_||o.logError("Invalid ast_override value for invCode : "+s[0])}}return t}}},function(e,t,n){function r(e){e?(A=_.stringContains(e,"http")?e:("https:"===fe.document.location.protocol?"https:":"http:")+"//"+e,_.logMessage("Setting endpoint to: "+A)):_.logError("Cannot set an empty endpoint")}function a(e){J[e.targetId]=ye(e)}function i(e){var t=Oe(e);return t}function o(e){return _.logMessage("getTag called for tag "+e),Me(e)?e&&H[e]?H[e]:void 0:void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)}function s(e){var t="defaultKey";return e.targetId&&(t=e.targetId),t}function d(e,t){_.logMessage("showTag called for "+e),G[e]=!0;var n=Me(e);if(n){var r=me.requests.tags[e];if(r.showTagCalled=!0,r.curWindow=t,r.displayed)return void _.logWarn("Attempting to display ad that is already displayed, will not render this ad again: "+e);me.requests.utCalled?r.adResponse?(h(r),me.requests.hasLeft&&qe()):me.requests.checkDisplay=!0:_.logWarn(e+" : showTag() called before ad request was made. This placement might not display if a subsequent loadTags() call is not made")}else _.logMessage("the "+e+" tag was loaded before the ad placement was available.",S.LOG.WARN)}function u(e,t){var n=t,r=s(e);n||(n=J[r]);var a=null;if(!n)return void _.logError("Issue writing iframe into document. No ad available to render");try{a=JSON.parse(n)}catch(i){return void _.logError("Issue writing iframe into document :"+i.message)}if(a&&a.tags){var o=a.tags[0];if(!o)return void _.logError("Issue writing iframe into document. No ad available to render");var d=o.ad;if(d&&d.banner&&d.banner.content)try{var u='<div style="border-style: none; position: absolute; max-width: 100%; max-height: 100%; top: 50%; left: 50%; -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%);">'+d.banner.content+"</div>";window.document.write(u),_.loadPixelUrl(fe,d[ae],_.getUUID()),_.logTimestamp("Ad is loaded")}catch(i){_.logError("Issue writing iframe into document :"+i.message)}d&&d.video&&d.video.content&&(_.loadPixelUrl(fe,d[ae],_.getUUID()),M.pcLoadVideo(d.video.content)),_.loadPixelUrl(fe,"https://secure.adnxs.com/imptr?id=34758&t=2",_.getUUID())}}function l(e,t,n,r,a){_._each(W[t],function(t){g(e,t,n,r,a)})}function g(e,t,n,r,a){0===n&&(e="Failure to contact endpoint. This can be caused by invalid CORS headers or failure of server to respond.");var i=me.requests.tags[t];if(i)var o=C.getAdObj(i.adResponse);var s=C.getAdErrorObj(e,t,a,n);O.emit(r,t,s,o)}function c(e,t,n){_.logMessage("renderAd is called"),_._each(me.requests.tags,function(e){e.uuid===t&&(e.adResponse=n,h(e))})}function f(e){}function p(e){var t=null;if(me.requests.cbCalled=!0,typeof e===ue||null===e||e.error){var n="malformed response from ad server";return e&&e.error&&(n=e.error),_.logError("Error response from impbus: "+n),void _._each(me.requests.tags,function(e,t){var r=C.getAdErrorObj(n,t,void 0,200);if(e)var a=C.getAdObj(e.adResponse);O.emit(S.EVENTS.BAD_REQUEST,t,r,a)})}e.debug&&e.debug.debug_info&&R.load(e.debug.debug_info),e.toolkit&&e.toolkit.enabled&&R.loadToolkit(e.tags),_._each(e.tags,function(e){if(e.error)return void _._each(me.requests.tags,function(t){if(t.uuid===e.uuid){var n="There was an exception from targetId:"+t.targetId+" this usually means there is a setup error on the tag (invalid ID etc)";_.logError(n,e.error);var r=C.getAdErrorObj(n,t.targetId,void 0,200);O.emit(S.EVENTS.BAD_REQUEST,t.targetId,r)}});var n=e.ads,r=N.checkIfMediatedResponse(n);r?_._each(me.requests.tags,function(r,a){if(r.uuid===e.uuid){r.utCalled=!0,r.isMediated=!0;var i=N.getMediationType(n),o=N.getMediationOptions(me.requests.tags,e);if(i===te)t=C.getAdObj(e),O.emit(S.EVENTS.AVAILABLE,a,t),N.callMediationFramework(i,e,o,c);else{var s=N.getContentForBannerMediation(r.targetId,e);e.ad={ad_type:ee},r.ad={mediatedContent:s},m(r,e,a)}}}):_._each(me.requests.tags,function(t,n){m(t,e,n)})}),me.requests.checkDisplay&&qe()}function m(e,t,n){var r;e.uuid===t.uuid&&(t.nobid===!0?(_.logMessage("No bid for targetId:"+e.targetId),r=C.getAdObj(t),O.emit(S.EVENTS.NO_BID,n,r)):(e.adResponse=t,e.utCalled=!0,r=C.getAdObj(t),O.emit(S.EVENTS.AVAILABLE,n,r),e.prebid||e.displayed||h(e)))}function h(e){var t,n,r,a,i=fe,o=e.adResponse;if(e.adResponse&&e.adResponse.ads){var s=_.getAdObjFromAdsArray(e.adResponse.ads);s.banner&&(e.initialHeight=s.banner.height,e.initialWidth=s.banner.width)}if(r=N.getAdObjByMediation(e),null===r||typeof r.error!==ue)return void I(o);if(typeof o!==ue&&e.showTagCalled){if(o&&r.renderer_url&&r.renderer_id){var d=r.renderer_id,u=N.getContentSourceForMediation(r);if(typeof u===ue)return void _.logError("No Content Source Found");if(r[r.ad_type]=u,F[d]){var l=F[d];_.isFn(l)||_.isObj(l)?(b(e),N.copyAdObjforMediation(e),D.invokeRendererRenderAd(l,e,v),e.displayed=!0,a=C.getAdObj(e.adResponse),O.emit(S.EVENTS.LOADED,e.targetId,a),_.logTimestamp("The "+e.targetId+" ad is loaded.")):(L[d]=typeof L[d]===ue?[]:L[d],L[d].push(e))}else _.loadScript(fe,r.renderer_url),L[d]=typeof L[d]===ue?[]:L[d],L[d].push(e),F[d]=!0}else if(r[Z]===$)_.logMessage("Render for the following ad should be handled outside of ast.js :"+e.tagId),e.displayed=!0,a=C.getAdObj(e.adResponse),O.emit(S.EVENTS.LOADED,e.targetId,a),_.logTimestamp("The "+e.targetId+" ad is loaded.");else{if(r[Z]===te)return void _.logWarn("Response has no renderer for video");if(r[Z]===ee){if(!e.isMediated){var g=r[ie][ne];if(_.isEmpty(g)||typeof g!==le)return void _.logError("Response has no banner object");if(!_.hasOwn(g,re))return void _.logError("Response has no banner content");if(!_.hasOwn(g,"width"))return void _.logError("Response has no banner width");if(!_.hasOwn(g,"height"))return void _.logError("Response has no banner height")}if(_.hasOwn(X,e.targetId))var c=X[e.targetId];if(e.alwaysUseXDomainIframe||e.enableSafeFrame){var f=i.document.getElementById(e.targetId),p=f.style.height,m=f.style.width;f.style.height=e.initialHeight,f.style.width=e.initialWidth,e.bounds=B.geom(e.targetId),f.style.height=p,f.style.width=m}var h=_.cloneAsObject(K);_.hasOwn(e.safeframe,"expansionByPush")&&(h.expansionByPush=e.safeframe.expansionByPush),_.hasOwn(e.safeframe,"expansionByOverlay")&&(h.expansionByOverlay=e.safeframe.expansionByOverlay),e.safeframe=h,t=P.getIframe(e);var E=U.getInstance(),y={};if(y.iframe=t,y.originalWidth=e.initialWidth,y.originalHeight=e.initialHeight,E.add(e.targetId,y),n=Ae(e),(e.alwaysUseXDomainIframe||e.enableSafeFrame)&&(n.style.height=e.initialHeight+"px",n.style.width=e.initialWidth+"px"),X[e.targetId]=t,typeof c!==ue&&i.document.getElementById(c.id)?n.replaceChild(t,c):n.appendChild(t),e.displayed=!0,i.document.body)try{e.showTagCalled&&(_e(e,n,t),n.style.display="inline")}catch(w){_.logError("Error rendering ad: "+w.message)}else _.logError("Error rendering ad: window.document.body is undefined")}else _.logError("Error rendering ad: unknown type")}V.push(e.targetId)}}function v(e,t,n){if(_.logMessage("handling event for:  "+e+" eventType : "+t),t===S.EVENTS.LOADED){var r=E(e),a=C.getAdObj(r.adResponse);O.emit(S.EVENTS.LOADED,e,a)}else O.emit(t,e)}function E(e){var t={};return _._each(me.requests.tags,function(n){e===n.targetId&&(t=n)}),t}function y(){_.addEventHandler(fe,"focus",B.handleWindowFocus),_.addEventHandler(fe,"blur",B.handleWindowBlur)}function b(e){if(!e||!e.isMediated){var t=N.getAdObjByMediation(e);_.loadPixelUrl(fe,t[ae],t[ge])}}function I(e){_.loadPixelUrl(fe,e[oe],e.uuid)}function w(e){for(var t=e[ie][de][0][se],n=0;n<t.length;n++)_.loadPixelUrl(fe,t[n],e[ge])}function T(){K.expansionByPush=!1,K.expansionByOverlay=!0,K.readCookie=!1,K.writeCookie=!1}n(7);var A,_=n(3),O=n(8),S=n(4),N=(n(9),n(10)),R=n(11),x=n(2),C=n(1),D=n(12),P=n(13),k=n(14),M=n(15),q=(n(16),n(17)),B=n(18),U=n(19),F={},L={},V=[],j=[],W={},z=0,Y=0,G={},J={},X={},H={},Q=[],K={},Z=S.UT_RESPONSE_PROP.AD_TYPE,$=S.AD_TYPE.NATIVE,ee=S.AD_TYPE.BANNER,te=S.AD_TYPE.VIDEO,ne=S.UT_RESPONSE_PROP.BANNER,re=S.UT_RESPONSE_PROP.CONTENT,ae=S.AD.NOTIFY,ie=S.CONTENT_SOURCE.RTB,oe=S.AD.NOAD,se=S.AD.IMP_URLS,de=S.AD.TRACKERS,ue=S.OBJECT_TYPE.UNDEFINED,le=S.OBJECT_TYPE.OBJECT,ge=S.AD.CREATIVE_ID,ce=S.OBJECT_TYPE.NUMBER,fe=_.getWindow();q.attach(fe,"message",q.handleMessage),T(),y();try{console.info?console.info("AST library loaded: 0.6.0"):console.log("AST library loaded: 0.6.0")}catch(pe){}fe.apntag=typeof fe.apntag!==ue?fe.apntag:{};var me=fe.apntag;me.anq=me.anq||[],me.debug=me.debug||!1,me.dongle=me.dongle||void 0,me.test=me.test||!1,me.loaded=!0,me.requests=me.requests||{},me.requests.keywords=me.requests.keywords||{},r(S.ENDPOINT.IMPBUS),me.requests.tagsOnPageCount=me.requests.tagsOnPageCount||z,me.requests.waitOnTagsCount=me.requests.waitOnTagsCount||Y,me.requests.showTagDefinedMap=me.requests.showTagDefinedMap||G,me.highlightAd=function(e){if(_.logInfo("Invoking apntag.highlightAd",arguments),e){var t=X[e];t&&(t.style.border="3px solid #e67300")}},me.anq.push=function(e){e.call()},me.setEndpoint=function(e){_.logInfo("Invoking apntag.setEndpoint",arguments),r(e)},me.setPageOpts=function(e){_.logInfo("Invoking apntag.setPageOpts",arguments),e&&(e.member&&(me.requests.member=e.member),e.targetingParams&&(me.requests.targetingParams=e.targetingParams,_.logWarn("targetingParams will be deprecated soon. Please use keywords instead")),e.keywords&&(me.requests.keywords=e.keywords),e.user&&(me.requests.user=e.user),e.app&&(me.requests.app=e.app),e.device&&(me.requests.device=e.device),e.site&&(me.requests.site=e.site),e.disablePsa&&(me.requests.disablePsa=!0),me.requests.enableSafeFrame=!1,e.enableSafeFrame&&(me.requests.enableSafeFrame=!0))},me.defineTag=function(e){_.logInfo("Invoking apntag.defineTag",arguments);var t=null;if(me.syncLoad?a(e):(t=i(e),Q.push(t)),H[t.targetId])return H[t.targetId];var n={targetId:t.targetId,on:t.on,off:t.off,modifyTag:t.modifyTag,setKeywords:t.setKeywords};return H[t.targetId]=n,n},me.getAdWrap=function(e){return _.logInfo("Invoking apntag.getAdWrap",arguments),Me(e)?e&&me.requests.tags&&me.requests.tags[e]&&me.requests.tags[e].adWrap?me.requests.tags[e].adWrap:void 0:void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)},me.setSizes=function(e,t){return _.logInfo("Invoking apntag.setSizes",arguments),arguments.length<2&&(t=e,e=this.targetId),Me(e)?void(me.requests.tags[e].sizes=t):void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)},me.modifyTag=function(e,t){_.logInfo("Invoking apntag.modifyTag",arguments);var n={};return arguments.length<2&&(t=e,e=this.targetId),Me(e)?(_._each(me.requests.tags[e],function(e,t){n[t]=e}),_._each(t,function(e,t){n[t]=e}),void(me.requests.tags[e]=n)):void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)},me.setKeywords=function(e,t){_.logInfo("Invoking apntag.setKeywords",arguments);var n={};return arguments.length<2&&(t=e,e=this.targetId),Me(e)?(_._each(me.requests.tags[e],function(e,t){n[t]=e}),n.keywords=n.keywords||{},_._each(t,function(e,t){_.hasOwn(n.keywords,t)?_.isArray(n.keywords[t])?n.keywords[t]=n.keywords[t].concat(e):n.keywords[t]=[n.keywords[t]].concat(e):n.keywords[t]=e}),void(me.requests.tags[e]=n)):void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)},me.onEvent=function(e,t,n){if(_.logInfo("Invoking apntag.onEvent",arguments),2===arguments.length&&"function"==typeof t&&typeof this.targetId===ue)n=t,t="*";else if(arguments.length<3&&(n=t,t=this.targetId,!Me(t)))return void _.logError("the "+t+" tag is not defined.",S.LOG.WARN);O.on(e,t,n)},me.offEvent=function(e,t,n){if(_.logInfo("Invoking apntag.offEvent",arguments),1===arguments.length&&typeof this.targetId===ue)t="*";else if(arguments.length<2&&(t=this.targetId,!Me(t)))return void _.logError("the "+t+" tag is not defined.",S.LOG.WARN);if(_.isArray(e))for(var r=0;r<e.length;r++)O.off(e[r],t,n);else O.off(e,t,n)},me.loadTags=function(){_.logInfo("Invoking apntag.loadTags",arguments),xe()},me.refresh=function(e){_.logInfo("Invoking apntag.refresh",arguments),Se(e)},me.showAdFromURL=function(e){_.logInfo("Invoking apntag.showAdFromURL",arguments);var t=ye(e);u(e,t)},me.resizeAd=function(e,t){_.logInfo("Invoking apntag.resizeAd",arguments);var n=0,r=0;_.isArray(t)&&2===t.length?(r=t[0],n=t[1]):_.logError("resizeAd must be invoked with a (targetId,[width, height])");var a=X[e];if(!a)return void _.logError("Failed to find target for resizeAd : "+e);var i=o(e),s=Te(i),d=fe.document.getElementById(s);return d?(d.style.height=n,d.style.width=r,a.height=n+"px",a.width=r+"px",a.height=n,a.width=r,void _.logMessage("ResizeAd successful for targetId: "+e)):void _.logError("Failed to find target for resizeAd: "+e)},me.collapseAd=function(e,t,n){_.logInfo("Invoking apntag.collapseAd",arguments);var r,a=0,i=0,s=o(e);if(!s)return void _.logError("CollapseAd failed to find targetId : "+e);r=Te(s),typeof t===ce&&(a=t),typeof n===ce&&(i=n);var d=fe.document.getElementById(r);if(null===d)return void _.logError("CollapseAd failed to find ad div : "+e);me.resizeAd(e,[i,a]),d.style.height=a,d.style.width=i,d.style.display="none";var u=me.requests.tags[e],l=C.getAdObj(u.adResponse);O.emit(S.EVENTS.COLLAPSE,e,l)},me.showTag=function(e,t){_.logInfo("Invoking apntag.showTag",arguments),t=t||fe,me.syncLoad?u(e):d(e,t)},me.setPageTargeting=function(e,t){_.logInfo("Invoking apntag.setPageTargeting",arguments),me.requests.targetingParams&&e&&t&&(me.requests.targetingParams[e]=t)},me.getPageTargeting=function(e){if(_.logInfo("Invoking apntag.getPageTargeting",arguments),me.requests.targetingParams&&e)return me.requests.targetingParams[e]},me.clearPageTargeting=function(e){_.logInfo("Invoking apntag.clearPageTargeting",arguments),me.requests.targetingParams&&e&&delete me.requests.targetingParams[e]},me.enableDebug=function(){me.debug=!0,_.logInfo("Invoking apntag.enableDebug",arguments)},me.disableDebug=function(){_.logInfo("Invoking apntag.disableDebug",arguments),me.debug=!1},me.notify=function(e,t,n){if(!e)return void _.logError("apntag.notify must be called with `messageType`");var r=D.createNotifyObj(e,t,n);j.push(r),_._each(F,function(e){D.invokeNotify(j,e)})},me.registerRenderer=function(e,t){_.logInfo("Invoking apntag.registerRenderer",arguments),e&&(_.isFn(t)||_.isObj(t))?(F[e]=t,D.invokeNotify(j,t),L[e]&&_._each(L[e],function(t){t.displayed||(b(t),N.copyAdObjforMediation(t),D.invokeRendererRenderAd(F[e],t,v),t.displayed=!0)})):_.logError("ast.js","registerRenderer must be called with (id, cbFn)")},me.recordErrorEvent=function(e,t){_.logInfo("Invoking apntag.recordErrorEvent",arguments);var n=me.requests.tags[t],r=C.getAdObj(n.adResponse),a=C.getAdErrorObj(e.message,t,e,200);O.emit(S.EVENTS.ERROR,t,a,r)};var he=function(e){_._each(me.requests.tags,function(e){e.utCalled||O.emit(S.EVENTS.REQUEST,e.targetId)}),_.logTimestamp("Ad is requested for member "+e)};me.clearRequest=function(){_.logInfo("Invoking apntag.clearRequest",arguments),me.requests={},me.requests.tags={},G={}},me.handleCb=function(e){_.logInfo("Invoking apntag.handleCb",arguments);try{p(e)}catch(t){var n=t.message?t.message:t;_.logError("Internal AST error : "+n);var r=f(e);l(n,r,200,S.EVENTS.BAD_REQUEST,t)}},me.emitEvent=function(e,t,n){_.logInfo("Invoking apntag.emitEvent",arguments),v(e,t,n)},me.getAdMarkup=function(e,t){if(me.requests.tags&&me.requests.tags[e]){var n=me.requests.tags[e];if(n.uuid===t)return n.adResponse.ads}},me.setSafeFrameConfig=function(e){_.hasOwn(e,"allowExpansionByPush")&&(K.expansionByPush=e.allowExpansionByPush),_.hasOwn(e,"allowExpansionByOverlay")&&(K.expansionByOverlay=e.allowExpansionByOverlay)};var ve=function(){for(var e=0;e<me.anq.length;e++)typeof me.anq[e].called===ue&&(me.anq[e].call(),me.anq[e].called=!0)},Ee=function(e,t){var n=!0;return _._each(t,function(t){_.isEmpty(e[t])&&(_.logError("Tag has missing paramater: "+t),n=!1)}),n},ye=function(e){var t=["utUrlEncoded"];if(Ee(e,t)){var n=decodeURIComponent(e.utUrlEncoded),r=null,a=new XMLHttpRequest;return a.open("GET",n,!1),a.withCredentials="true",a.send(null),_.logTimestamp("Ad is requested"),200===a.status?r=a.responseText:_.logError("Error request ut URL"),r}},be=function(e,t){var n=e.data,r=!0,a=new XMLHttpRequest;a.onload=function(){var e=null;if(200===a.status)try{e=JSON.parse(a.responseText),me.handleCb(e)}catch(n){_.logError("failed to parse ad response from impbus: "+n.message),
    l(n.message,t,a.status,S.EVENTS.REQUEST_FAIL,n)}else _.logError(a.status+" : "+a.statusText),l(a.statusText,t,a.status,S.EVENTS.REQUEST_FAIL)},a.onerror=function(n){var r=n.target.status,a="Error contacting impbus endpoint: "+e.url+" http response code:"+r;l(a,t,r,S.EVENTS.REQUEST_FAIL)},a.open("POST",e.url,r),a.setRequestHeader("Content-Type","text/plain"),a.withCredentials=!0;try{a.send(n),me.requests.utCalled=!0}catch(i){_.logError("Error making POST request: "+i),Pe(e,t)}},Ie=function(e){var t={},n=we();return t.url=n,t.data=JSON.stringify(e),t},we=function(){var e=!1;return _._each(me.requests.tags,function(t){t.prebid&&(e=!0)}),e?A+S.ENDPOINT.UT_PREBID:A+S.ENDPOINT.UT_BASE},Te=function(e){return S.PREFIX.UT_DIV+e.targetId},Ae=function(e){var t,n=Te(e),r=e.curWindow||fe;return t=r.document.getElementById(n)?r.document.getElementById(n):r.document.createElement("div"),t.style.display="none",t.id=n,t},_e=function(e,t,n){var r=k.getBrowserType(),a=e.curWindow||fe,i=a.document.getElementById(e.targetId);if(i){i.appendChild(t),e.utDivId=t.id,e.utiframeId=n.id,r===S.BROWSER_TYPE.IE||r===S.BROWSER_TYPE.OPERA?P.loadIeIframe(n,e):P.loadIframe(n,e),e.isMediated||(w(e.adResponse.ads[0]),_.logMessage("Win notification sent for ad tag: "+e.targetId));var o=N.getContentSourceForMediation(e.adResponse.ads[0]),s=Number(i.style.width.replace(/[^\d\.\-]/g,""));!isNaN(s)&&s>o.width&&("center"===e.promoAlignment?i.setAttribute("align","center"):i.setAttribute("align","left")),_.logMessage("The "+e.targetId+" ad is loaded."),_.logTimestamp("The "+e.targetId+" ad is loaded.");var d=C.getAdObj(e.adResponse);O.emit(S.EVENTS.LOADED,e.targetId,d)}else _.logWarn("No div element found for display ad. This ad will not show. Div id: "+e.targetId)},Oe=function(e){if(e.rid&&(me.requests.keywords.rid=e.rid),e.provider_id&&(me.requests.keywords.provider_id=e.provider_id),e.debug&&(me.debug=e.debug),e.astToolkit&&e.astDongle&&(me.requests.toolkit={enabled:!0,dongle:e.astDongle}),e.size)return void _.logError("Size is deprecated, please use sizes instead.");if(e.member||(e.member=me.requests.member),e.member||(e.member="none"),!(e.tagId||e.invCode&&e.member))return void _.logError("tagId or (invCode & memberId) should be defined for targetId: "+e.targetId);try{var t=e.targetId,n=De(e,t);return _.logMessage("defineTag called for: "+t),me.requests&&me.requests.utCalled===!0&&!me.requests.tags[t].utCalled&&_.logMessage("A placement was loaded after ut call was started. These ad calls will not be coordinated"),n}catch(r){_.logError("buildAdTagContainer: "+r.message)}},Se=function(e){me.requests.utCalled=!1,me.requests.hasLeft=!1,me.requests.cbCalled=!1,me.requests.errorReported=!1;var t=_.getTargetArrayforRefresh(e),n=Re(t);_._each(n,function(e,t){_._each(V,function(e){if(t===e){var n=fe.document,r=n.getElementById(e);if(!r)return;for(;r.hasChildNodes();)r.removeChild(r.firstChild)}})}),_._each(n,function(e){e.utCalled=!1,e.displayed=!1});try{xe()}catch(r){_.logError("refreshTags "+r.message)}},Ne=function(){Se(this.targetId)},Re=function(e){var t={};return 0===e.length?me.requests.tags:(_._each(me.requests.tags,function(n,r){for(var a=0;a<e.length;a++)e[a]===r&&(t[r]=n)}),t)},xe=function(){_._each(W,function(e,t){if("none"===t)Ce(t);else{var n=Number(t);isNaN(n)?_.logError("Invalid value for member"):Ce(n)}})},Ce=function(e){he(e);var t=x.buildRequestJsonByMemberId(me.requests,e,Q),n=Ie(t);return _.isEmpty(t.tags)?void _.logWarn("ast.loadTagsByMemberId: no defined tags at this point so no /UT request will be made"):void("withCredentials"in new XMLHttpRequest?be(n,e):Pe(n,e))},De=function(e,t){var n=e.member;return me.requests=me.requests||{},me.requests.tags=me.requests.tags||{},me.requests.utCalled=me.requests.utCalled||!1,me.requests.hasLeft=me.requests.hasLeft||!1,me.requests.cbCalled=me.requests.cbCalled||!1,me.requests.enableSafeFrame&&(e.enableSafeFrame=!0),e.safeframe=_.cloneAsObject(K)||{},_.hasOwn(e,"safeframeConfig")&&(_.hasOwn(e.safeframeConfig,"allowExpansionByPush")&&(e.safeframe.expansionByPush=e.safeframeConfig.allowExpansionByPush),_.hasOwn(e.safeframeConfig,"allowExpansionByOverlay")&&(e.safeframe.expansionByOverlay=e.safeframeConfig.allowExpansionByOverlay)),me.requests.tags[t]=e,me.requests.tags[t].utCalled=me.requests.tags[t].utCalled||!1,me.requests.tags[t].showTagCalled=me.requests.tags[t].showTagCalled||!1,me.requests.tags[t].displayed=me.requests.tags[t].displayed||!1,me.requests.tags[t].on=me.onEvent||void 0,me.requests.tags[t].off=me.offEvent||void 0,me.requests.tags[t].setSizes=me.setSizes||void 0,me.requests.tags[t].modifyTag=me.modifyTag||void 0,me.requests.tags[t].setKeywords=me.setKeywords||void 0,me.requests.tags[t].refresh=Ne||void 0,W[n]=typeof W[n]===ue?[]:W[n],W[n].push(e.targetId),G[e.targetId]&&(me.requests.tags[t].showTagCalled=!0),me.requests.tags[t]},Pe=function(e,t){var n=fe,r=ke(e),a=_.loadScript(n,r);me.requests.utCalled=!0,a.onload=function(){_.logMessage("JSONP fallback used instead of POST.")},a.onerror=function(n){if(!me.requests.errorReported){var r="Unknown script error contacting endpoint over JSONP. Endpoint: "+e.url;l(r,t,"-1",S.EVENTS.REQUEST_FAIL,n),_.logError(r)}},a.onreadystatechange=function(n){if(!("loaded"!==a.readyState&&"complete"!==a.readyState||me.requests.cbCalled||me.requests.errorReported)){me.requests.errorReported=!0;var r="Unknown network error contacting endpoint over JSONP. Endpoint: "+e.url;l(r,t,"-1",S.EVENTS.REQUEST_FAIL,n),_.logError(r)}}},ke=function(e){var t=e.url+(e.url.indexOf("?")+1?"&":"?")+"cb=apntag.handleCb&q="+encodeURI(e.data);return t},Me=function(e){me.requests.tags=me.requests.tags||{};var t=!0,n=me.requests.tags[e];return typeof n===ue&&(t=!1),t},qe=function(){me.requests.hasLeft=!1,_._each(me.requests.tags,function(e,t){e.displayed||e.prebid||e.isMediated||(_.logWarn(t+" is not displayed.",S.LOG.WARN),me.requests.hasLeft=!0)}),me.requests.hasLeft||_.logMessage("all Tags are displayed.")},Be=function(e){function t(){n||(n=!0,e())}var n=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1);else if(document.attachEvent){try{var r=null!==window.frameElement}catch(a){}if(document.documentElement.doScroll&&!r){var i=function(){if(!n)try{document.documentElement.doScroll("left"),t()}catch(e){setTimeout(i,10)}};i()}document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()})}if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var o=window.onload;window.onload=function(){o&&o(),t()}}};_.logTimestamp("AST library loaded"),ve(),me.requests.checkDisplay||Be(qe),"function"==typeof window.define&&window.define.amd&&window.define("appnexusAst",[],function(){return window.apntag}),window.apn_testonly={};var Ue=window.apn_testonly;Ue.getPageTargetingParams=function(){return me.requests.targetingParams},Ue.getEvents=function(){return O.get()},Ue.getEvent=function(e,t){var n,r=O.get();return _._each(r[e],function(e){null!==e[t]&&void 0!==e[t]&&(n=e[t])}),n},Ue.buildPostRequestParams=function(e){return Ie(e)},Ue.getContentSourceForMediation=function(e){return N.getContentSourceForMediation(e)},Ue.getRequestTagsforRefresh=function(e){return Re(e)},Ue.getTag=function(e){return _.logMessage("getTag called for tag "+e),Me(e)?e&&me.requests.tags&&me.requests.tags[e]?me.requests.tags[e]:void 0:void _.logError("the "+e+" tag is not defined.",S.LOG.WARN)},Ue.getEndPoint=function(){return we()},Ue.getKeyForSyncTags=function(e){return s(e)},Ue.getAllRequest=function(){return me.requests},Ue.getJSONPUrl=function(e){return ke(e)},Ue.getInternalTagArr=function(){return Q},Ue.makeGetRequest=function(e){return ye(e)},Ue.doSyncShowTag=function(e,t){return u(e,t)}},function(e,t){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null===this)throw new TypeError('"this" is null or not defined');var r=Object(this),a=r.length>>>0;if(0===a)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=a)return-1;for(n=Math.max(i>=0?i:a-Math.abs(i),0);n<a;){if(n in r&&r[n]===e)return n;n++}return-1})},function(e,t,n){var r=n(3),a=n(4),i=Array.prototype.slice,o=r._map(a.EVENTS,function(e){return e});e.exports=function(){function e(e,t){var a=t[0],o=i.call(t,1);r.logMessage("Emitting event for: "+e+" for ad tag: "+a),r._each(n[e],function(e){var t="";if(t=r.hasOwn(e,"*")?e["*"]:e[a],null!==t&&void 0!==t&&"function"==typeof t)try{t.apply(null,o)}catch(n){r.logError("events._dispatch: Error executing event handler function: "+n.message)}})}function t(e){return r.contains(o,e)}var n={},a={};return a.on=function(e,a,i){if(t(e)){var s={};s[a]=i,n[e]=n[e]||[],n[e].push(s)}else r.logError("Wrong event name : "+e+" Valid event names :"+o)},a.emit=function(t){var n=i.call(arguments,1);e(t,n)},a.off=function(e,t,a){r.isEmpty(n[e])||r._each(n[e],function(e){"*"===t&&null!==e[Object.keys(e)[0]]&&void 0!==e[Object.keys(e)[0]]?"undefined"!=typeof a&&Object.values(e)!==a||(e[Object.keys(e)[0]]=null):null!==e[t]&&void 0!==e[t]&&("undefined"!=typeof a&&e[t]!==a||(e[t]=null))})},a.get=function(){return n},a}()},function(e,t){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function e(e){return e<10?"0"+e:e}function t(){return this.valueOf()}function n(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function r(e,t){var a,s,u,l,g,c=i,f=t[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof d&&(f=d.call(t,e,f)),typeof f){case"string":return n(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(i+=o,g=[],"[object Array]"===Object.prototype.toString.apply(f)){for(l=f.length,a=0;a<l;a+=1)g[a]=r(a,f)||"null";return u=0===g.length?"[]":i?"[\n"+i+g.join(",\n"+i)+"\n"+c+"]":"["+g.join(",")+"]",i=c,u}if(d&&"object"==typeof d)for(l=d.length,a=0;a<l;a+=1)"string"==typeof d[a]&&(s=d[a],u=r(s,f),u&&g.push(n(s)+(i?": ":":")+u));else for(s in f)Object.prototype.hasOwnProperty.call(f,s)&&(u=r(s,f),u&&g.push(n(s)+(i?": ":":")+u));return u=0===g.length?"{}":i?"{\n"+i+g.join(",\n"+i)+"\n"+c+"}":"{"+g.join(",")+"}",i=c,u}}var a=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=t,Number.prototype.toJSON=t,String.prototype.toJSON=t);var i,o,s,d;"function"!=typeof JSON.stringify&&(s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var a;if(i="",o="","number"==typeof n)for(a=0;a<n;a+=1)o+=" ";else"string"==typeof n&&(o=n);if(d=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return r("",{"":e})})}()},function(e,t,n){var r=n(3),a=n(4),i=t,o=[],s=!1,d=a.EXTERNAL_LIB.VIDEO_MEDIATION_JS,u=a.EXTERNAL_LIB.BANNER_MEDIATION_JS,l=a.UT_RESPONSE_PROP.AD_TYPE,g=a.AD_TYPE.BANNER,c=a.AD_TYPE.VIDEO;i.checkIfMediatedResponse=function(e){var t=!1;return e&&r._each(e,function(e){if("csm"===e.content_source)return void(t=!0)}),t},i.getMediationType=function(e){var t=g;return e&&r._each(e,function(e){if(e[l]===c)return void(t=c)}),t},i.callMediationFramework=function(e,t,n,a){var i=this;e===c&&(null!==t&&o.push(t),s&&window.APNVideo_AstMediationManager?r._each(o,function(e){if(!e.called)try{window.APNVideo_AstMediationManager.selectAd(e.uuid,e,n,a),e.called=!0}catch(t){r.logError("Error invoking video mediation","mediationmanager.js",t)}}):(r.loadScript(window,d,function(){i.callMediationFramework(c,null,n,a)}),s=!0))},i.getMediationOptions=function(e,t){var n={};return r._each(e,function(e){e.uuid===t.uuid&&e.mediationOptions&&(n=e.mediationOptions)}),n},i.getAdObjByMediation=function(e){return e.isMediated?e.adResponse.ad:e.adResponse.ads[0]},i.copyAdObjforMediation=function(e){return e.isMediated||(e.adResponse.ad=e.adResponse.ads[0]),e},i.getContentSourceForMediation=function(e){var t=e.content_source,n=e.ad_type;if(t)return e[t][n]},i.getContentForBannerMediation=function(e,t){var n="<script>";return n+="var APN_macros = {};",n+='APN_macros.uuid = "'+e+'";',n+="APN_macros.ads = ",n+='window.parent.apntag.getAdMarkup("'+e+'", "'+t.uuid+'");',n+=";",n+="document.write('<scr' + 'ipt src=\""+u+"\"></scr' + 'ipt>');",n+="</script>"}},function(e,t){function n(){var e=document.createElement("iframe");return e.id="loader",e.height="100%",e.width="100%",e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.frameBorder="0",e}function r(e){var t=e.map(function(e){return'\n      <table style="border: 1px solid black; border-radius: 5px; font-family: sans-serif; margin: 1em; padding: .5em">\n        <tr>\n          <td style="padding-right: 5em;"><b>Target&nbsp;ID</b></td>\n          <td style="width: 100%;">'+a(e)+"</td>\n        </tr>\n        <tr>\n          <td><b>Creative ID</b></td>\n          <td>"+e.ads[0].creative_id+"</td>\n        </tr>\n        <tr>\n          <td><b>Buyer Member ID</b></td>\n          <td>"+e.ads[0].buyer_member_id+"</td></tr>\n        <tr>\n          <td><b>Creative Size</b></td>\n          <td>"+e.ads[0].rtb.banner.height+"x"+e.ads[0].rtb.banner.width+"</td></tr>\n        <tr>\n          <td><b>Available Sizes</b></td>\n          <td>"+i(e)+"</td></tr>\n        <tr>\n          <td><b>Winning Bid</b></td>\n          <td>"+e.ads[0].cpm+"</td></tr>\n        <tr>\n          <td><b>Demand Source</b></td>\n          <td>"+o(e)+"</td></tr>\n        <tr>\n          <td><b>Ad Type</b></td>\n          <td>"+e.ads[0].ad_type+"</td></tr>\n        <tr>\n          <td><b>Media Type</b></td>\n          <td>"+e.ads[0].media_type_id+'</td></tr>\n        <tr>\n          <td style="color: #555; font-size: smaller; padding-top: .5em;" colspan="2">\n            Console Ad Profile: <a href="'+s(e)+'" target="_blank">'+e.ad_profile_id+'</a>\n            |\n            <a href="'+d(e)+'" target="_blank">Creative Preview<a/>\n          </td>\n        </tr>\n      </table>\n    '}).join(" ");return t}function a(e){try{return Object.keys(apntag.requests.tags).filter(function(t){return apntag.requests.tags[t].uuid===e.uuid})[0]}catch(t){return""}}function i(e){try{var t=a(e),n=apntag.requests.tags[t].sizes;return JSON.stringify(n)}catch(r){return""}}function o(e){var t="";return t=e.ads[0].csm?"CSM":e.ads[0].buyer_member_id===e.ads[0].seller_member_id||e.ads[0].deal_id?e.ads[0].buyer_member_id!==e.ads[0].seller_member_id&&e.ads[0].deal_id?"Deal":e.ads[0].buyer_member_id===e.ads[0].seller_member_id?"Direct":"":"RTB"}function s(e){return"//console.appnexus.com/ad-quality?id="+e.placement.publisher.id}function d(e){return"//ib.adnxs.com/cr?id="+e.ads[0].creative_id}var u=t;u.load=function(e){e=e.replace(/(\n)/g,"<br>");var t=document.body,r=document.createElement("div");r.id="appnexus_debug_window";var a=document.createElement("div");a.style.width="100%",a.style.height="400px",a.style.clear="both",t.insertBefore(a,null);var i=r.style;i.position="fixed",i.bottom="0px",i.left="0px",i.width="100%",i.height="450px",i.overflow="hidden",i["border-top"]="1px solid",i["z-index"]=999999,i.background="white",t.insertBefore(r,null);var o=document.createElement("div");o.style.width="100%",o.style.height="30px";var s=n();r.appendChild(s);var d=s.contentWindow.document;s.onload=function(){var e,t,n,r=d.getElementsByTagName("br"),a=r.length,i=0;for(i;i<a-1;i++)n=!1,e=r[i].nextSibling,t=e.nodeName.toLowerCase(),"br"===t&&(n=!0),n&&(e.style.display="none")};var u="</script>";d.open(),d.write(e),d.write(u),d.close()},u.loadToolkit=function(e){var t=r(e),a=document.body,i=document.createElement("div");i.id="appnexus_debug_window";var o=document.createElement("div");o.style.width="100%",o.style.height="400px",o.style.clear="both",a.insertBefore(o,null);var s=i.style;s.position="fixed",s.bottom="0px",s.left="0px",s.width="100%",s.height="450px",s.overflow="hidden",s["border-top"]="1px solid",s["z-index"]=999999,s.background="white",a.insertBefore(i,null);var d=document.createElement("div");d.style.width="100%",d.style.height="30px";var u=n();i.appendChild(u);var l=u.contentWindow.document;l.open(),l.write(t),l.close()}},function(e,t,n){var r=n(3),a=t;a.invokeNotify=function(e,t){r.isFn(t)?r.logWarn("apntag.notify not supported by renderer"):r.isObj(t)&&r._each(e,function(e){r.isFn(t.notify)&&!e.sent&&(e.sent=!0,t.notify(e.messageType,e.messagePayload))})},a.invokeRendererRenderAd=function(e,t,n){r.isFn(e)?e.call(apntag,t,n):r.isObj(e)&&(r.isFn(e.renderAd)?e.renderAd.call(apntag,t,n):r.logError("Error invoking rendererObj.renderAd(). renderAd must be a function"))},a.createNotifyObj=function(e,t,n){return{messageType:e,messagePayload:t,targetId:n,sent:!1}}},function(e,t,n){function r(e){var t=e.targetId,n="";if(e.isMediated)n=e.ad.mediatedContent,u.logMessage("Invoking mediation for displaying banner ad: "+t);else if(e.adResponse&&1===e.adResponse.ads.length){var r=u.getAdObjFromAdsArray(e.adResponse.ads);n=r[l][g]}return i(t,n,e.alwaysUseXDomainIframe||e.enableSafeFrame)}function a(e,t){return t?"":'window.onerror = function(e) {\n        if(window.parent && window.parent.apntag) {\n          window.parent.apntag.recordErrorEvent(e,"'+e+'");\n          return true;\n        }\n      };'}function i(e,t,n){var r=a(e,n);return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>\n    <base target="_top" /><script>inDapIF=true;\n    apntag_targetId = "'+e+'";\n    '+r+'\n    </script></head>\n    <body>\n    <script>\n    document.body.id = "'+e+'";\n    </script>\n    '+t+"\n    </body></html>"}function o(e){return e.replace("/&/g","&amp;").replace("/</g","&lt;").replace("/>/g","&gt;").replace('/"/g',"&quot;").replace("/'/g","&#39;")}var s=n(4),d=t,u=n(3),l=s.UT_RESPONSE_PROP.BANNER,g=s.UT_RESPONSE_PROP.CONTENT;d.getIframe=function(e){var t,n=c(e),a=u.getWindow();if(t=null!==a.document.getElementById(n)?a.document.getElementById(n):a.document.createElement("iframe"),t.id=n,e.alwaysUseXDomainIframe||e.enableSafeFrame){if(u.logMessage("targetId: "+e.targetId+" is using safeFrame. Loading this ad into sandboxed iframe"),e.isMediated)i=apntag.getAdMarkup(e.targetId,e.uuid);else{var i=r(e);i=o(i),i=""+i}var s={targetId:e.targetId,ad:i,host:a.location.protocol+"//"+a.location.host,bounds:u.cloneAsObject(e.bounds),debug:u.debugTurnedOn(),hostSfSupport:e.safeframe,isMediated:e.isMediated};t.name=JSON.stringify(s)}else t.name=n;return t.setAttribute("height",e.initialHeight),t.setAttribute("width",e.initialWidth),t.tabIndex="-1",t.width=e.initialWidth+"px",t.height=e.initialHeight+"px",t.border="0",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t},d.loadIeIframe=function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=s.EXTERNAL_LIB.SAFE_FRAME_URL;else{var n="";n=r(t);try{e.contentWindow.contents=n}catch(a){e.src="javascript:document.write('<script>document.domain=\""+document.domain+"\"</script>')",e.contentWindow.contents=n}e.src='javascript:window["contents"];'}},d.loadIframe=function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=s.EXTERNAL_LIB.SAFE_FRAME_URL;else{var n="",a=f(e);n=r(t),a.open("text/html","replace"),a.write(n),a.close()}};var c=function(e){return s.PREFIX.UT_IFRAME+e.targetId+"_"+u.getUUID()},f=function(e){var t;try{t=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument}catch(n){u.logError("Error getting iframe document: "+n)}return t}},function(e,t){t.getBrowserType=function(){var e=n(),t=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return t[1]};var n=function(){return navigator.userAgent.toLowerCase()}},function(e,t,n){function r(){window.mraid.removeEventListener("ready",r),o()}function a(){"loading"===window.mraid.getState()?window.mraid.addEventListener("ready",r):o()}function i(e){e&&(window.mraid.removeEventListener("viewableChange",i),d())}function o(){window.mraid.useCustomClose(!0),window.mraid.isViewable()?d():window.mraid.addEventListener("viewableChange",i)}function s(e){e&&(window.mraid.removeEventListener("viewableChange",s),window.mraid.close())}function d(){u.loadScript(window,"https://acdn.adnxs.com/mobile/pricecheck/MobileVastPlayer.js",function(){try{var e=window.innerWidth,t=window.innerHeight,n="video-content",r=window.document.createElement("div");r.id=n,r.style.width=e+"px",r.style.height=t+"px",r.style.top="0px",r.style.left="0px",r.style.position="absolute",document.body.appendChild(r);var a={autoInitialSize:!1,aspectRatio:"16:9",delayExpandUntilVPAIDImpression:!1,delayExpandUntilVPAIDInit:!0,initialAudio:"on",initialPlayback:"auto",showMute:!0,showProgressBar:!0,showPlayToggle:!1,showBigPlayButton:!1,allowFullscreen:!1,forceAdInFullscreen:!1,disableCollapse:!1,fitInContainer:!0,shouldResizeVideoToFillMobileWebview:!0,enableInlineVideoForIos:!1,preloadInlineAudioForIos:!1,enableNativeInline:!0,fixedSizePlayer:!1,controlBarPosition:"below",terminateUnresponsiveVPAIDCreative:!1,vpaidTimeout:2e4,waterfallTimeout:15e3,waterfallSteps:-1,useCustomOpenForClickthrough:!0,vpaidEnvironmentVars:{rhythmone:!0},playerSkin:{dividerColor:"black",controlBarColor:"black"},skippable:{skipLocation:"top-right",skipText:"Video can be skipped in %%TIME%% seconds",skipButtonText:"SKIP"}};a.targetElementId=n,top.window.options=a,window.APNVideo_MobileVastPlayer.playVast(r,a,window.videoContent,function(e){"video-complete"!==e&&"video-skip"!==e||window.mraid&&window.mraid.close();var t=e;"undefined"!=typeof e&&"undefined"!=typeof e.name&&"undefined"!=typeof e.url&&"video_click_open_url"===t.name&&(window.mraid?(window.mraid.open(t.url),window.mraid.addEventListener("viewableChange",s)):window.open(t.url))})}catch(i){u.logError("Issue loading video into document :",i)}})}var u=n(3);t.pcLoadVideo=function(e){window.videoContent=e,window.mraid?a():d()}},function(e,t,n){var r=n(3),a=(n(8),t);a.startListening=function(){r.addEventHandler(window,"message",function(e){if(e&&e.origin&&e.origin.indexOf(".adnxs.com")>0)try{var t=JSON.parse(e.data);"adError"===t.eventType&&apntag.recordErrorEvent(t.exception,t.targetId)}catch(n){r.logError(n)}})},a.sendMessage=function(e,t){e&&e.postMessage(t,"*")}},function(e,t,n){var r=(n(4),n(3)),a=n(18),i=t;i.attach=function(e,t,n){r.addEventHandler(e,t,n)},i.handleMessage=function(e){if(r.logInfo("Data sent from creative",t),e.origin===r.getCdnOrigin()){var t;try{t=JSON.parse(e.data)}catch(n){return void r.logError(n)}if(r.hasOwn(t,"eventType"))"adError"===t.eventType&&window.apntag.recordErrorEvent(t.exception,t.targetId);else switch(t.name){case"expand":a.expandIframe(t);break;case"collapse":a.collapseIframe(t);break;case"resizeAd":apntag.resizeAd(t.targetId,t.cmd);break;case"message":}}},i.sendMessage=function(e,t,n){e.postMessage(t,n)}},function(e,t,n){function r(e){var t=o.getInstance(),n=t.getIframes();a._each(n,function(t,n){var r=apntag.requests.tags[n];if(r.alwaysUseXDomainIframe||r.enableSafeFrame){var o=t.iframe.contentWindow,d={};d.targetId=n,d.value=e,d.status=i.SAFEFRAME.STATUS.FOCUS_CHANGE,s.sendMessage(o,JSON.stringify(d),a.getCdnOrigin())}})}var a=n(3),i=n(4),o=n(19),s=n(17),d=i.TYPE.NUM,u=t;u.expandIframe=function(e){a.logMessage("Expand iframe started by host");var t,n,r,u,l=!1,g=!1,c=0,f=0,p=0,m=0,h=a.getWindow(),v=h.document.getElementById(i.PREFIX.UT_DIV+e.targetId),E=o.getInstance(),y=E.getIframe(e.targetId),b=y.iframe.style,I=v.style;I.display="";var w=parseInt(I.width,10),T=parseInt(I.height,10);if(e.bounds.multiDir?(n=a.getValueAsType("data.bounds.left",e.bounds.left,d),u=a.getValueAsType("data.bounds.right",e.bounds.right,d),t=a.getValueAsType("data.bounds.top",e.bounds.top,d),r=a.getValueAsType("data.bounds.bottom",e.bounds.bottom,d),p=w+n+u,m=T+t+r,t?(f=t*-1,g=!0):f=0,n?(c=n*-1,l=!0):c=0):(c=e.bounds.x,f=e.bounds.y,l=c<0,g=f<0,p=l?w+c*-1:w+c,m=g?T+f*-1:T+f),!(p<=w&&m<=T)){b.width=p+"px",b.height=m+"px",l&&(b.left=c+"px"),g&&(b.top=f+"px"),b.zIndex=i.SAFEFRAME.DEFAULT_ZINDEX;var A=h.document.getElementById(i.PREFIX.UT_DIV+e.targetId),_=A.style;_.position="relative",e.bounds.push?(_.width=p+"px",_.height=m+"px"):(_.width=w+"px",_.height=T+"px");var O=y.iframe.contentWindow,S={};S.targetId=e.targetId,S.status=i.SAFEFRAME.STATUS.NOTIFY_EXPANDED,s.sendMessage(O,JSON.stringify(S),a.getCdnOrigin())}},u.collapseIframe=function(e){a.logMessage("Collapse iframe started by host");var t=a.getWindow(),n=t.document.getElementById(i.PREFIX.UT_DIV+e.targetId),r=n.style,d=o.getInstance(),u=d.getIframe(e.targetId),l=u.iframe.style,g=u.originalWidth,c=u.originalHeight;l.left="",l.top="0px",r.width=g+"px",l.width=g+"px",r.height=c+"px",l.height=c+"px",l.zIndex="";var f=u.iframe.contentWindow,p={};p.targetId=e.targetId,p.status=i.SAFEFRAME.STATUS.NOTIFY_COLLAPSED,s.sendMessage(f,JSON.stringify(p),a.getCdnOrigin())},u.geom=function(e){a.logMessage("Geom starting");var t=a.getWindow(),n=t.document.getElementById(e).getBoundingClientRect();return n=a.cloneAsObject(n)},u.handleWindowFocus=function(){r(!0)},u.handleWindowBlur=function(){r(!1)}},function(e,t,n){var r=n(3),a=function(){function e(){return{add:function(e,t){n[e]=t},getIframe:function(e){return r.hasOwn(n,e)?n[e]:null},getIframes:function(){return n}}}var t,n={};return{getInstance:function(){return t||(t=e()),t}}}();e.exports=a},function(e,t){function n(e,t,n,r){return{eventType:e,targetId:t,data:n,exception:r}}var r=t;r.createMessage=function(e,t,r,a){return new n(e,t,r,a)}}]);